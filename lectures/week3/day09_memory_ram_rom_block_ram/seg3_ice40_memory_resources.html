<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 9.3: iCE40 Memory Resources — Accelerated HDL for Digital System Design</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/theme/white.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../theme/ucf-hdl.css">
    <style>
        .two-col { display: flex; gap: 2em; }
        .two-col .col { flex: 1; }
        .panel { padding: 1em; border-radius: 8px; }
        .panel-sw { background: #F3E5F5; border: 2px solid #9C27B0; }
        .panel-hw { background: #E3F2FD; border: 2px solid #1565C0; }
        .panel-good { background: #E8F5E9; border: 2px solid #2E7D32; }
        .panel-bad { background: #FFEBEE; border: 2px solid #C62828; }
        .panel-neutral { background: #FFF8E1; border: 2px solid #F9A825; }
        .check { color: #2E7D32; font-weight: 700; }
        .cross { color: #C62828; font-weight: 700; }
    </style>
</head>
<body>
<div class="reveal">
<div class="slides">

<!-- TITLE SLIDE -->
<section class="title-slide" data-background-color="#000000">
    <div style="margin-bottom:1em;">
        <span style="color:#FFC904;font-weight:700;font-size:0.6em;letter-spacing:0.15em;text-transform:uppercase;">
            Day 9 · Memory: RAM, ROM &amp; Block RAM
        </span>
    </div>
    <h1 style="color:#FFC904;border-bottom:none;font-size:2.2em;">iCE40 Memory Resources</h1>
    <p class="subtitle" style="color:#E8E8E4;">Video 3 of 4 · ~10 minutes</p>
    <p class="course-info" style="color:#888;">UCF · Department of ECE</p>
</section>

<section>
    <h2>What the iCE40 HX1K Gives You</h2>
    <table style="margin-top:0.5em;">
        <thead><tr><th>Resource</th><th>Quantity</th><th>Notes</th></tr></thead>
        <tbody>
            <tr><td>Logic Cells (LUTs)</td><td>1,280</td><td>4-input LUTs + flip-flops</td></tr>
            <tr><td>Embedded Block RAM (EBR)</td><td>16 blocks</td><td>4 Kbit each = <strong>64 Kbit total</strong></td></tr>
            <tr><td>EBR configs</td><td colspan="2">256×16, 512×8, 1024×4, 2048×2</td></tr>
        </tbody>
    </table>
    <div class="fragment callout" style="font-size:0.75em;">
        64 Kbit = 8 KB total. Sounds small, but it's enough for: 8K bytes of instruction ROM, dual UART FIFOs, a small frame buffer, or a character ROM + video buffer.
    </div>
    <aside class="notes">The HX1K has 16 blocks of 4 Kbit each — 64 Kbit or 8 KB total. Each block can be configured as 256 by 16, 512 by 8, 1024 by 4, or 2048 by 2. Enough for useful ROMs, FIFOs, and buffers.</aside>
</section>
<section>
    <h2>When Does Yosys Use EBR vs. LUTs?</h2>
    <div style="font-size:0.8em;">
        <p class="fragment"><span style="color:#2E7D32;">✓ EBR:</span> Synchronous read AND write, size ≥ ~64 bits, standard patterns</p>
        <p class="fragment"><span style="color:#E65100;">✗ LUTs:</span> Asynchronous read, very small memories, unusual access patterns</p>
    </div>
    <pre class="synth fragment"><code class="language-bash"># Check in Yosys synthesis output:
# "Mapping to bram type $__ICE40_RAM4K"  → EBR used ✓
# No bram mapping message               → LUT-based ✗</code></pre>
    <div class="fragment callout" style="font-size:0.75em;">
        <strong>Rule of thumb:</strong> If you want block RAM, use synchronous read. Check the Yosys output to confirm inference.
    </div>
    <aside class="notes">Yosys uses EBR when it sees synchronous read and write patterns and the memory is large enough to be worth it. Check the synthesis output for the mapping message. If you don't see it, your memory is in LUTs.</aside>
</section>
<section>
    <h2>Key Takeaways</h2>
    <div style="margin-top:0.5em;">
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">①</span>&ensp;iCE40 HX1K: 16 EBR blocks × 4 Kbit = 64 Kbit (8 KB) total.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">②</span>&ensp;Synchronous read → EBR. Asynchronous read → LUTs.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">③</span>&ensp;Check Yosys output: look for <code>$__ICE40_RAM4K</code> mapping.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">④</span>&ensp;8 KB is enough for instruction ROMs, FIFOs, character tables.
        </p>
    </div>
</section>
<section data-background-color="#000000">
    <div style="text-align:center;">
        <p style="color:#FFC904;font-size:0.7em;font-weight:600;letter-spacing:0.1em;text-transform:uppercase;">Up Next</p>
        <h2 style="color:#FFFFFF;font-size:1.8em;">Practical Memory Applications</h2>
        <p style="color:#E8E8E4;font-size:0.8em;margin-top:0.5em;">Video 4 of 4 · ~11 minutes</p>
        <p style="color:#888;font-size:0.6em;margin-top:2em;">Pattern sequencers, sine tables, and character ROMs.</p>
    </div>
</section>


</div></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/plugin/highlight/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/plugin/notes/notes.min.js"></script>
<script>
Reveal.initialize({
    hash: true, slideNumber: 'c/t', showSlideNumber: 'all',
    width: 1280, height: 720, margin: 0.04,
    transition: 'slide', transitionSpeed: 'default', backgroundTransition: 'fade',
    plugins: [ RevealHighlight, RevealNotes ],
});
</script>
</body>
</html>