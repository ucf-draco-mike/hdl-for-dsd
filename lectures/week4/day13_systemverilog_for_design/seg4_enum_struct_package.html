<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 13.4: enum, struct, and package — Accelerated HDL for Digital System Design</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/theme/white.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../theme/ucf-hdl.css">
    <style>
        .two-col { display: flex; gap: 2em; }
        .two-col .col { flex: 1; }
        .panel { padding: 1em; border-radius: 8px; }
        .panel-sw { background: #F3E5F5; border: 2px solid #9C27B0; }
        .panel-hw { background: #E3F2FD; border: 2px solid #1565C0; }
        .panel-good { background: #E8F5E9; border: 2px solid #2E7D32; }
        .panel-bad { background: #FFEBEE; border: 2px solid #C62828; }
        .panel-neutral { background: #FFF8E1; border: 2px solid #F9A825; }
        .check { color: #2E7D32; font-weight: 700; }
        .cross { color: #C62828; font-weight: 700; }
    </style>
</head>
<body>
<div class="reveal">
<div class="slides">

<!-- TITLE SLIDE -->
<section class="title-slide" data-background-color="#000000">
    <div style="margin-bottom:1em;">
        <span style="color:#FFC904;font-weight:700;font-size:0.6em;letter-spacing:0.15em;text-transform:uppercase;">
            Day 13 · SystemVerilog for Design
        </span>
    </div>
    <h1 style="color:#FFC904;border-bottom:none;font-size:2.2em;">enum, struct, package</h1>
    <p class="subtitle" style="color:#E8E8E4;">Video 4 of 4 · ~15 minutes</p>
    <p class="course-info" style="color:#888;">UCF · Department of ECE</p>
</section>

<section>
    <h2><code>enum</code> — Named States</h2>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:0.5em;">
    <pre class="sim" style="font-size:0.5em;"><code class="language-verilog">// Verilog FSM states
localparam S_IDLE  = 2'b00;
localparam S_START = 2'b01;
localparam S_DATA  = 2'b10;
localparam S_STOP  = 2'b11;
reg [1:0] r_state;</code></pre>
    <pre class="synth" style="font-size:0.5em;"><code class="language-verilog">// SystemVerilog FSM states
typedef enum logic [1:0] {
    S_IDLE  = 2'b00,
    S_START = 2'b01,
    S_DATA  = 2'b10,
    S_STOP  = 2'b11
} uart_state_t;
uart_state_t state;</code></pre>
    </div>
    <div style="font-size:0.75em;margin-top:0.5em;">
        <p class="fragment"><strong>Type safety:</strong> <code>state = 3;</code> → compile warning (3 isn't a <code>uart_state_t</code>)</p>
        <p class="fragment"><strong>Debug:</strong> <code>$display("State: %s", state.name());</code> prints <code>"State: S_IDLE"</code></p>
        <p class="fragment"><strong>Synthesis:</strong> Identical to <code>localparam</code> — zero hardware cost</p>
    </div>
    <aside class="notes">enum gives you named, type-safe states. The compiler warns if you assign an invalid value. In simulation, state.name() prints the state name instead of a number. Zero hardware cost — synthesizes identically to localparam.</aside>
</section>
<section>
    <h2><code>struct</code> — Grouped Signals</h2>
    <pre class="synth"><code class="language-verilog" data-noescape>// Instead of many separate signals:
logic [7:0] tx_data;
logic       tx_valid, tx_busy, tx_done;

<span class="fragment">// Group them into a struct:
typedef struct packed {
    logic [7:0] data;
    logic       valid;
    logic       busy;
    logic       done;
} uart_tx_ctrl_t;

uart_tx_ctrl_t tx_ctrl;

// Access with dot notation:
tx_ctrl.data  = 8'h41;
tx_ctrl.valid = 1'b1;
if (tx_ctrl.busy) ...</span></code></pre>
    <div class="fragment callout" style="font-size:0.7em;">
        <code>packed</code> = contiguous bit vector. <code>uart_tx_ctrl_t</code> is 11 bits wide (8+1+1+1). Fully synthesizable.
    </div>
    <aside class="notes">Structs group related signals with named fields. The packed keyword makes it a contiguous bit vector — fully synthesizable. Use dot notation to access fields. Great for bus interfaces, configuration registers, and internal datapaths.</aside>
</section>
<section>
    <h2><code>package</code> — Shared Definitions</h2>
    <pre class="synth"><code class="language-verilog" data-noescape>// File: uart_pkg.sv
package uart_pkg;
    typedef enum logic [2:0] {
        S_IDLE, S_START, S_DATA, S_PARITY, S_STOP
    } uart_state_t;

    typedef struct packed {
        logic [7:0] data;
        logic       parity_error;
        logic       frame_error;
    } uart_rx_result_t;
endpackage

<span class="fragment">// File: uart_tx.sv
module uart_tx
    import uart_pkg::*;   // import all types
(
    input  logic i_clk, ...
);
    uart_state_t state;   // type from package
endmodule</span></code></pre>
    <div class="fragment callout-warning" style="font-size:0.7em;">
        <strong>Toolchain caveat:</strong> <code>package</code> requires full SV support. Icarus Verilog does NOT support it. Verilator and Yosys do. For this course, demonstrated but optional.
    </div>
    <aside class="notes">Packages provide a single source of truth for shared types and constants. Change a state encoding in one place and all modules update. Clean alternative to include files. Icarus doesn't support packages, but Verilator and most commercial tools do.</aside>
</section>
<section>
    <h2>Key Takeaways</h2>
    <div style="margin-top:0.5em;">
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">①</span>&ensp;<code>enum</code>: type-safe FSM states. Zero hardware cost. <code>.name()</code> for debug.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">②</span>&ensp;<code>struct packed</code>: grouped signals with dot notation. Fully synthesizable.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">③</span>&ensp;<code>package</code>: shared types/constants across modules. Single source of truth.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">④</span>&ensp;All three improve readability and catch bugs — no hardware overhead.
        </p>
    </div>
</section>
<section data-background-color="#000000">
    <div style="text-align:center;">
        <p style="color:#FFC904;font-size:0.7em;font-weight:600;letter-spacing:0.1em;text-transform:uppercase;">Pre-Class Videos Complete</p>
        <h2 style="color:#FFFFFF;font-size:1.6em;">See You in Class!</h2>
        <p style="color:#E8E8E4;font-size:0.8em;margin-top:0.5em;">Day 13 · Hands-On Lab</p>
        <p style="color:#888;font-size:0.6em;margin-top:2em;">Make sure your toolchain is working and your Go Board is connected.</p>
    </div>
</section>


</div></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/plugin/highlight/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/plugin/notes/notes.min.js"></script>
<script>
Reveal.initialize({
    hash: true, slideNumber: 'c/t', showSlideNumber: 'all',
    width: 1280, height: 720, margin: 0.04,
    transition: 'slide', transitionSpeed: 'default', backgroundTransition: 'fade',
    plugins: [ RevealHighlight, RevealNotes ],
});
</script>
</body>
</html>