<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Day 4.2: Nonblocking Assignment — Why It Matters — Accelerated HDL for Digital System Design</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/theme/white.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../theme/ucf-hdl.css">
    <style>
        .two-col { display: flex; gap: 2em; }
        .two-col .col { flex: 1; }
        .panel { padding: 1em; border-radius: 8px; }
        .panel-sw { background: #F3E5F5; border: 2px solid #9C27B0; }
        .panel-hw { background: #E3F2FD; border: 2px solid #1565C0; }
        .panel-good { background: #E8F5E9; border: 2px solid #2E7D32; }
        .panel-bad { background: #FFEBEE; border: 2px solid #C62828; }
        .panel-neutral { background: #FFF8E1; border: 2px solid #F9A825; }
        .check { color: #2E7D32; font-weight: 700; }
        .cross { color: #C62828; font-weight: 700; }
    </style>
</head>
<body>
<div class="reveal">
<div class="slides">

<!-- TITLE SLIDE -->
<section class="title-slide" data-background-color="#000000">
    <div style="margin-bottom:1em;">
        <span style="color:#FFC904;font-weight:700;font-size:0.6em;letter-spacing:0.15em;text-transform:uppercase;">
            Day 4 · Sequential Logic Fundamentals
        </span>
    </div>
    <h1 style="color:#FFC904;border-bottom:none;font-size:2.2em;">Nonblocking Assignment</h1>
    <p class="subtitle" style="color:#E8E8E4;">Video 2 of 4 · ~15 minutes</p>
    <p class="course-info" style="color:#888;">UCF · Department of ECE</p>
</section>

<section>
    <h2>The Problem: Blocking in Sequential Blocks</h2>
    <pre class="mistake"><code class="language-verilog" data-noescape>// WRONG — blocking assignment in sequential block
always @(posedge clk) begin
    b = a;     // b gets a's value immediately
    c = b;     // c gets b's NEW value (= a) — NOT the old b!
end</code></pre>
    <div class="fragment callout-danger" style="font-size:0.8em;">
        <strong>Intended:</strong> a 2-stage shift register (a → b → c on successive clock edges).<br>
        <strong>Got:</strong> a and c are copies of the same value. The pipeline stage is destroyed.
    </div>
    <aside class="notes">Here's the problem. With blocking assignment in a sequential block, b gets a's value immediately, then c gets b's NEW value — which is already a. Both stages see the same value on the same clock edge. The pipeline is destroyed.</aside>
</section>
<section>
    <h2>The Fix: Nonblocking Assignment</h2>
    <pre class="synth"><code class="language-verilog" data-noescape>// CORRECT — nonblocking assignment
always @(posedge clk) begin
    b <= a;    // scheduled: b will get a's CURRENT value
    c <= b;    // scheduled: c will get b's CURRENT (old) value
end</code></pre>
    <div class="fragment callout" style="font-size:0.8em;">
        With <code>&lt;=</code>, all right-hand sides are evaluated <strong>first</strong>, then all left-hand sides are updated <strong>simultaneously</strong>. Order within the block doesn't matter.
    </div>
    <aside class="notes">With nonblocking assignment, all right-hand sides are evaluated first with current values, then all left-hand sides update simultaneously at the clock edge. c gets the OLD value of b. The pipeline works correctly.</aside>
</section>
<section>
    <h2>Timing Diagram Proof</h2>
    <pre style="font-family:monospace;font-size:0.5em;background:none;border:none;box-shadow:none;color:#333;">
         ┌──┐  ┌──┐  ┌──┐  ┌──┐  ┌──┐
clk  ────┘  └──┘  └──┘  └──┘  └──┘  └──
         ↑     ↑     ↑     ↑     ↑

a:   ─[X]─────────────────────────────
        X

          Blocking (=)        Nonblocking (<=)
b:   ────[X]──────────    ────[·]─[X]────────
          X  (same clk)        ·   X  (1 clk delay)

c:   ────[X]──────────    ────[·]─[·]─[X]────
          X  (same clk!)       ·   ·   X  (2 clk delay) ✓
    </pre>
    <div class="fragment golden-rule" style="font-size:0.9em;">
        Blocking: a, b, c all update in the <strong>same</strong> cycle. Pipeline destroyed.<br>
        Nonblocking: each stage delays by one cycle. <strong>Correct shift register.</strong>
    </div>
    <aside class="notes">The timing diagram makes it clear. With blocking, everything updates in the same cycle — pipeline destroyed. With nonblocking, each stage delays by one clock cycle — correct shift register behavior.</aside>
</section>
<section>
    <h2>The Complete Rule</h2>
    <table style="margin-top:0.5em;">
        <thead><tr><th>Context</th><th>Assignment</th><th>Reason</th></tr></thead>
        <tbody>
            <tr><td><code>always @(*)</code></td><td><code>=</code> blocking</td><td>Evaluate immediately, like combinational wires</td></tr>
            <tr><td><code>always @(posedge clk)</code></td><td><code>&lt;=</code> nonblocking</td><td>All registers update simultaneously at edge</td></tr>
            <tr><td><code>assign</code></td><td><code>=</code> (only option)</td><td>Continuous drive</td></tr>
        </tbody>
    </table>
    <div class="callout-danger" style="font-size:0.8em;margin-top:1em;">
        <strong>Never mix</strong> <code>=</code> and <code>&lt;=</code> in the same <code>always</code> block.
    </div>
    <aside class="notes">The complete rule. Blocking in combinational, nonblocking in sequential, and never mix them in the same block.</aside>
</section>
<section>
    <h2>Key Takeaways</h2>
    <div style="margin-top:0.5em;">
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">①</span>&ensp;Blocking <code>=</code> evaluates immediately — destroys pipelines in sequential blocks.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">②</span>&ensp;Nonblocking <code>&lt;=</code> schedules updates — all registers update at once.
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">③</span>&ensp;<strong>Never mix <code>=</code> and <code>&lt;=</code> in the same block.</strong>
        </p>
        <p class="fragment" style="font-size:0.85em;">
            <span style="color:#FFC904;font-size:1.3em;font-weight:700;">④</span>&ensp;This is not just style — it's correctness.
        </p>
    </div>
</section>
<section data-background-color="#000000">
    <div style="text-align:center;">
        <p style="color:#FFC904;font-size:0.7em;font-weight:600;letter-spacing:0.1em;text-transform:uppercase;">Up Next</p>
        <h2 style="color:#FFFFFF;font-size:1.8em;">Flip-Flops With Reset and Enable</h2>
        <p style="color:#E8E8E4;font-size:0.8em;margin-top:0.5em;">Video 3 of 4 · ~10 minutes</p>
        <p style="color:#888;font-size:0.6em;margin-top:2em;">The D-FF variations you'll use in every sequential design.</p>
    </div>
</section>


</div></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/plugin/highlight/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/plugin/notes/notes.min.js"></script>
<script>
Reveal.initialize({
    hash: true, slideNumber: 'c/t', showSlideNumber: 'all',
    width: 1280, height: 720, margin: 0.04,
    transition: 'slide', transitionSpeed: 'default', backgroundTransition: 'fade',
    plugins: [ RevealHighlight, RevealNotes ],
});
</script>
</body>
</html>